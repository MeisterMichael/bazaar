

.container-fluid
	.row
		.col-xs-10
			%ul.breadcrumb
				%li
					%a{ href: offer_admin_index_path }
						%i.fa.fa-angle-left
						Offers
			%h2
				%strong= @offer.title
				%small= current_user.to_local_tz(@offer.created_at).to_s( :short )

		.col-xs-2


	= form_for @offer, url: offer_admin_path( @offer ) do |f|
		.row
			.col-xs-8
				.well.white-well
					.form-group
						%h4 Content
					.form-group
						= f.label :title
						= f.text_field :title, class: 'form-control input-lg'

					.form-group
						= f.label :description
						= f.text_area :description, class: 'form-control wysiwyg', data: { wysiwyg: { height_min: 80, toolbar_sticky: true, toolbar_preset: 'admin_default', object_class: @offer.class.base_class.name, object_id: @offer.id }.to_json }

					.form-group
						= f.label :cart_description, 'Cart Description'
						= f.text_area :cart_description, class: 'form-control wysiwyg', data: { wysiwyg: { height_min: 100, toolbar_sticky: true, toolbar_preset: 'admin_default', object_class: @offer.class.base_class.name, object_id: @offer.id }.to_json }

				.row
					.col-xs-2
						.well
							- if @offer.avatar
								%a{ href: @offer.avatar, target: '_preview_image' }
									%img.img.img-responsive.center-block#product_avatar_img{:src => @offer.avatar }
							- else
								%img.img.img-responsive.center-block{:src => 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=', style: 'width: 100%;' }
					.col-xs-8
						= f.label :avatar_attachment, 'Avatar'
						= f.file_field :avatar_attachment

			.col-xs-4
				.well.white-well
					%h4
						Offer Settings
					.form-group
						= f.label :code
						= f.text_field :code, class: 'form-control'

					.form-group
						= f.label :status
						= f.collection_select :status, Bazaar::Offer.statuses, :first, :first, {}, class: 'form-control'

					.form-group
						= f.label :availability
						= f.collection_select :availability, Bazaar::Offer.availabilities, :first, :first, {}, class: 'form-control'

					.form-group
						= f.label :product_id, "Product"
						= f.collection_select :product_id, Bazaar::Product.active.order(title: :asc), :id, :title, { include_blank: "-- Select Product --" }, { class: 'form-control' }

					%hr

					.form-group
						= f.submit 'Update', class: 'btn btn-primary'

	.row#schedule
		.col-xs-12
			.well.white-well
				%a.pull-right{ href: '#new_offer_schedule_modal', data: { toggle: :modal, target: '#new_offer_schedule_modal' } }
					%i.fa.fa-plus
					Add Schedule Item
				%h4
					Schedule

				= render 'schedule_table', offer_schedules: @offer.offer_schedules, args: {}
	.row#price
		.col-xs-12
			.well.white-well
				%a.pull-right{ href: '#new_offer_price_modal', data: { toggle: :modal, target: '#new_offer_price_modal' } }
					%i.fa.fa-plus
					Add Price
				%h4
					Prices

				= render 'price_table', offer_prices: @offer.offer_prices, args: {}
	.row#skus
		.col-xs-12
			.well.white-well
				%a.pull-right{ href: '#new_offer_sku_modal', data: { toggle: :modal, target: '#new_offer_sku_modal' } }
					%i.fa.fa-plus
					Add Sku
				%h4
					SKUs

				= render 'sku_table', offer_skus: @offer.offer_skus, args: {}



= render 'bazaar/offer_sku_admin/new_modal', parent_obj: @offer, args: {}
= render 'bazaar/offer_price_admin/new_modal', parent_obj: @offer, args: {}
= render 'bazaar/offer_schedule_admin/new_modal', parent_obj: @offer, args: {}
